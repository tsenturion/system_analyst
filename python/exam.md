### **Экзаменационное задание**


#### **Введение**

Одной из задач системного аналитика является анализ существующих алгоритмов и процессов с целью их формализации, оптимизации или интеграции в новые системы. Часто для этого приходится работать с исходным кодом, чтобы понять логику работы приложения без участия разработчика.

Вам предоставлен фрагмент кода на Python. Ваша задача — не стать программистом, а понять, **что делает этот код на концептуальном уровне**, и описать это в терминах, понятных вам, бизнесу и разработчикам.

#### **Исходный код для анализа**

```python
import json
import os
from datetime import datetime, timedelta

def process_user_actions(file_path):
    """
    Анализирует файл с действиями пользователей.
    """
    if not os.path.exists(file_path):
        print(f"Ошибка: Файл {file_path} не найден.")
        return

    with open(file_path, 'r', encoding='utf-8') as file:
        data = json.load(file)

    user_sessions = {}
    final_results = []

    for action in data:
        user_id = action.get('user_id')
        action_time = datetime.fromisoformat(action.get('timestamp'))
        action_type = action.get('action')

        if user_id not in user_sessions:
            user_sessions[user_id] = {
                'start_time': action_time,
                'end_time': action_time,
                'actions': []
            }

        current_session = user_sessions[user_id]

        time_diff = action_time - current_session['end_time']

        if time_diff > timedelta(minutes=30):
            final_results.append({
                'user_id': user_id,
                'session_start': current_session['start_time'].isoformat(),
                'session_end': current_session['end_time'].isoformat(),
                'session_duration_seconds': int((current_session['end_time'] - current_session['start_time']).total_seconds()),
                'action_sequence': current_session['actions']
            })
            current_session['start_time'] = action_time
            current_session['actions'] = []

        current_session['end_time'] = action_time
        current_session['actions'].append(action_type)

    for user_id, session in user_sessions.items():
        if session['actions']:
            final_results.append({
                'user_id': user_id,
                'session_start': session['start_time'].isoformat(),
                'session_end': session['end_time'].isoformat(),
                'session_duration_seconds': int((session['end_time'] - session['start_time']).total_seconds()),
                'action_sequence': session['actions']
            })

    output_filename = f"sessions_report_{datetime.now().strftime('%Y%m%d_%H%M%S')}.json"
    with open(output_filename, 'w', encoding='utf-8') as out_file:
        json.dump(final_results, out_file, ensure_ascii=False, indent=2)

    print(f"Отчет успешно сохранен в файл: {output_filename}")
    print(f"Обработано сессий: {len(final_results)}")

if __name__ == "__main__":
    process_user_actions('user_actions_log.json')
```

---

#### **Задания**

1.  **Декомпозиция и описание логики**
    *   Разбейте алгоритм на ключевые логические блоки и дайте краткое описание каждому из них.
    *   Опишите своими словами, какую основную бизнес-задачу решает этот скрипт? (Ответьте на вопрос: «Что он делает?», а не «Как он это делает?»).

2.  **Формализация бизнес-правил**
    *   На основе анализа кода сформулируйте четкое бизнес-правило, которое определяет принадлежность действий пользователя к одной сессии.
    *   Какие данные на входе и какие структурированные данные на выходе? Опишите семантику (смысл) выходных данных.

3.  **Анализ и рекомендации**
    *   Предположите, в каком контексте и для каких бизнес-целей может использоваться результат работы этого скрипта? (Минимум 2 варианта).
    *   Какие потенциальные проблемы или ограничения вы видите в данном алгоритме? (С точки зрения данных и логики).


### **Критерии оценивания**

Экзамен оценивается по трем независимым критериям. Итоговый балл является суммой баллов по всем критериям.

**Максимальный итоговый балл: 12 (3 x 4)**

---

#### **Критерий 1: Понимание логики и декомпозиция** (макс. 4 балла)

Оценивает способность понять алгоритм и разбить его на ключевые логические этапы.

*   **0 баллов:** Ответ отсутствует или не соответствует заданию.
*   **1 балл:** Кандидат смог выделить только очевидные, поверхностные шаги. Описание логики неверное или крайне расплывчатое.
*   **2 балла:** Выделены основные шаги, но их декомпозиция недостаточно детализирована. Описание основной задачи содержит фактические ошибки или не учитывает ключевое правило.
*   **3 балла:** Алгоритм корректно разбит на все ключевые блоки. Основная задача описана верно, но без глубины или с незначительными неточностями в формулировках.
*   **4 балла:** Декомпозиция полная и точная. Основная задача описана исчерпывающе и концептуально верно.

---

#### **Критерий 2: Формализация требований и работа с данными** (макс. 4 балла)

Оценивает способность выявлять бизнес-правила, формализовать входные и выходные данные.

*   **0 баллов:** Ответ отсутствует или не соответствует заданию.
*   **1 балл:** Сформулировано одно из требований. Бизнес-правило не выявлено или сформулировано неверно.
*   **2 балла:** Правило, вход и выход описаны, но с неточностями. Например, указано только наличие полей без их семантики (смысла).
*   **3 балла:** Бизнес-правило сформулировано четко. Входные и выходные данные описаны верно, но не для всех полей раскрыта их бизнес-логика.
*   **4 балла:** Полное и точное описание. Правило сформулировано безупречно. Дано четкое описание входного формата и исчерпывающая семантика каждого поля выходных данных.

---

#### **Критерий 3: Аналитическое мышление и рекомендации** (макс. 4 балла)

Оценивает способность видеть бизнес-ценность, контекст и потенциальные риски/ограничения решения.

*   **0 баллов:** Ответ отсутствует или не соответствует заданию.
*   **1 балл:** Предложен один общий или очевидный вариант использования. Проблемы не выявлены.
*   **2 балла:** Предложены 2 варианта использования, но без привязки к конкретной бизнес-цели. Выявлены только поверхностные проблемы.
*   **3 балла:** Предложены 2 релевантных варианта использования с указанием бизнес-цели. Выявлены ключевые ограничения.
*   **4 балла:** Кандидент демонстрирует глубокий анализ. Помимо вариантов использования и базовых ограничений, предлагает *конструктивные рекомендации* или выявляет менее очевидные проблемы.

**Удачи в выполнении задания!**